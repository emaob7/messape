import Foundation
import SwiftUI
import WidgetKit
import GoogleMobileAds

struct ClockView: View {
    @State private var searchText = ""
    @State private var showAlert = false
    @State private var showDescriptionAlert = false // Nueva alerta para la descripciÃ³n
    @State private var selectedImageName = UserDefaults(suiteName: "group.artemis.EarthC137.widget1")?.string(forKey: "selectedImage") ?? "command one"
    @State private var loadingButtons: [String: Bool] = [:]
    @State private var showConfirmationMessage = false
    @State private var interstitial: Interstitial?
    @State private var showInstruModal = false // Estado para mostrar el modal de instrucciones
    @State private var showLanguageAlert = false // Estado para controlar el Alert
    @AppStorage("isEnglish", store: UserDefaults(suiteName: "group.artemis.EarthC137.isEnglish"))
    
    private var isEnglish: Bool = true
    private let userDefaults = UserDefaults(suiteName: "group.artemis.EarthC137.widget1")
    
    private let images = ["brat","girasoles para marceðŸŒ»","f**ing","cartoon console","bff","command one", "earthrise","art", "wanted", "eng james webb Nasa","every second","11 time", "cloud emoji", "hi hi", "hello world","call me","nostalgia", "tune"]
    private let imageDescriptions: [String: String] = [ // Descripciones para las imÃ¡genes
           "girasoles para marceðŸŒ»": "En un universo lleno de posibilidades infinitas, ocurre una coincidencia que lo cambia todo: una conexiÃ³n tan Ãºnica que desafÃ­a al tiempo y la distancia.(Girasoles para Marce) no es solo un widget; es un recordatorio de que en este vasto universo, siempre llega alguien que ilumina nuestro camino y nos hace sentir que no estamos solos, alguien que queremos abrazar y no soltar nunca.DedÃ­calo a esa persona que da sentido a tus dÃ­as con apenas un mensaje y nunca olvides que la verdadera magia de la vida estÃ¡ en las conexiones unicas y genuinas que tocan el alma.Porque todos necesitamos un Marce en nuestra vida.ðŸŒ»",
           "f**ing": "En medio del caos, soledad y bÃºsqueda de significado, hay una Serie de TV que nos recuerda que incluso en medio del desorden, encontrar a alguien que te entienda puede cambiarlo todo. Este widget captura la esencia de esa conexiÃ³n Ãºnica, donde dos almas imperfectas se encuentran y descubren que el verdadero viaje no es escapar del mundo, sino enfrentar juntos lo desconocido.",
           "bff": "La vida puede ser un torbellino de altibajos, pero Friends nos enseÃ±a que, con las personas adecuadas a tu lado, cada dÃ­a es mÃ¡s llevadero. Este widget celebra esas amistades que se convierten en familia, los momentos de risa compartida, los consejos en el sofÃ¡ y los recuerdos que siempre nos acompaÃ±an.",
           "command one":"De niÃ±os jugar a la consola era un ritual, una aventura donde cada partida era una nueva historia por vivir. Y todos querÃ­amos el mando 1, no solo por ser el protagonista, sino porque simbolizaba el liderazgo y teniamos la creencia que el mando 1 daba un plus al jugador. ðŸŽ®",
           "earthrise":"Desde el vacÃ­o infinito del espacio, Earthrise una foto de la Nasa nos muestra nuestro hogar como nunca antes: frÃ¡gil, hermoso y lleno de posibilidades. Este widget captura ese momento histÃ³rico que nos recuerda la grandeza del cosmos y, al mismo tiempo, la pequeÃ±a pero significativa existencia de nuestro planeta. Recordandonos que, en medio de la inmensidad, la Tierra es un lugar Ãºnico que debemos cuidar, un punto azul donde se entrelazan todas nuestras historias. ðŸŒâœ¨",
           "art":"Este widget es un homenaje a los amantes del arte, un museo en miniatura que vive en tu pantalla. Cada hora, una obra maestra diferente te transporta a un universo de colores, formas y emociones, recordÃ¡ndote que el arte tiene el poder de inspirarnos y llevarnos a algo mÃ¡s grande. Perfecto para quienes ven en cada pincelada una historia y en cada obra un pedazo del alma humana. ðŸŽ¨âœ¨",
           "wanted":"Al igual que los piratas del sombrero de paja, todos tenemos un tesoro por el que luchar, amigos que se convierten en familia y un viaje que vale la pena vivir. ",
           "eng james webb Nasa":"Eng James Webb NASA es un homenaje visual al esfuerzo humano detrÃ¡s de uno de los proyectos mÃ¡s ambiciosos de la exploraciÃ³n espacial. Este widget despliega 24 imÃ¡genes del proceso de ensamblaje del telescopio James Webb, mostrando la dedicaciÃ³n, precisiÃ³n y trabajo en equipo que hicieron posible este avance histÃ³rico. MÃ¡s que un tributo, es una invitaciÃ³n a apreciar la complejidad del diseÃ±o y a aprender cÃ³mo la ciencia y la ingenierÃ­a se unen para expandir los lÃ­mites de nuestro conocimiento del universo. ðŸŒŒðŸ”§",
           "every second":"Every Second estÃ¡ inspirado en la intensidad y profundidad de una serie de TV, recordÃ¡ndonos que en la vida, cada segundo importa. Este widget es un tributo a esos momentos que parecen pequeÃ±os, pero que en realidad construyen nuestras grandes historias. Perfecto para quienes saben que el tiempo no se mide solo en minutos, sino en pasiÃ³n, esfuerzo y el deseo de transformar lo cotidiano en algo extraordinario.ðŸ¥«âœ¨",
           "11 time":"Un viaje entre mundos donde la valentÃ­a, la amistad y el poder de enfrentar lo desconocido son clave. Este widget tiene significado de encontrar la fuerza dentro de nosotros para luchar contra la oscuridad. Perfecto para los que creen que incluso en los momentos mÃ¡s oscuros, siempre hay luz al otro lado. âš¡ðŸ•°ï¸",
           "cloud emoji":"Cloud Emoji trae consigo la nostalgia de esos momentos mÃ¡gicos frente a la pantalla, cuando unas nubes esponjosas y un color amarillo vibrante nos daban la bienvenida a un mundo lleno de risas y lecciones de vida. Este widget captura esa esencia que marcÃ³ nuestra infancia, recordÃ¡ndonos que a veces, lo mÃ¡s simple puede llenarnos de felicidad y reconectarnos con los recuerdos mÃ¡s cÃ¡lidos. â˜ï¸âœ¨",
           "hi hi":"Hi Hi estÃ¡ inspirado en la ternura del romance adolescente, recordÃ¡ndonos que un simple hi puede ser el inicio de algo maravilloso: una amistad, una historia de amor o un momento inolvidable. Los puntos entre los nÃºmeros de la hora llevan un hi, como un guiÃ±o a esos pequeÃ±os gestos que tienen el poder de cambiarlo todo. Perfecto para quienes creen en la magia de los detalles. â¤ï¸â°",
           "hello world":"Hello World es un tributo a los programadores y su pasiÃ³n por el cÃ³digo. DiseÃ±ado como un editor de texto, este widget evoca esos primeros pasos en el mundo de la programaciÃ³n, donde cada lÃ­nea de cÃ³digo abre la puerta a infinitas posibilidades. Perfecto para quienes saben que detrÃ¡s de un simple Hello, World se esconde el inicio de algo extraordinario. ðŸ’»âœ¨",
           "call me":"Call Me estÃ¡ inspirado en la intensidad y belleza de una Pelicula, un tributo a las conexiones que marcan nuestra vida para siempre. Este widget captura la esencia de aquellos momentos donde las palabras no bastan, pero un simple llÃ¡mame puede contener todo lo que sentimos. Perfecto para quienes creen en el amor autÃ©ntico, profundo y transformador. ðŸ’”âœ¨",
           "nostalgia":"Nostalgia captura la calma de un paisaje verde bajo un cielo azul, transportÃ¡ndonos a una Ã©poca en la que la tecnologÃ­a nos invitaba a soÃ±ar con un futuro brillante. Inspirado en aquellos fondos icÃ³nicos que marcaron una era, este widget es un homenaje a la simplicidad y la belleza de la naturaleza, incluso desde una pantalla. ðŸŒ³âœ¨",
           "brat":"Imagina un reloj que no solo marca el tiempo, sino que tambiÃ©n provoca, cuestiona y rompe esquemas. Brat es mÃ¡s que un guiÃ±o a la rebeldÃ­a; es un grito en verde, ese tono â€œofensivoâ€ que habla de imperfecciÃ³n y caos, pero tambiÃ©n de autenticidad.",
           "cartoon console":"Lleva en tu pantalla la consola que todos quisimos tener, esa que parece salida de un mundo de dibujos animados, tierna, colorida y mÃ¡gica.",
           
           
           
           
           
           // AÃ±ade descripciones para las demÃ¡s imÃ¡genes aquÃ­
       ]
    private let interstitialAdUnitID = "ca-app-pub-4622872693950947/5863361532"
    //private let interstitialAdUnitID = "ca-app-pub-3940256099942544/4411468910" //
    
    
  
    
    var body: some View {
        NavigationView {
        
        VStack {
            // TÃ­tulo estilo iOS
            HStack {
                Image("c137trades")
                    .resizable()
                    .frame(width: 54, height: 54) // Ajusta el tamaÃ±o segÃºn sea necesario
                    .padding(.leading,3)

                Spacer() // Empuja los elementos a los extremos

                // Input de bÃºsqueda con Ã­conos
                HStack {
                    Image(systemName: "magnifyingglass")
                        .foregroundColor(.gray)
                        .padding(.leading, 8)
                    
                    TextField(isEnglish ? "Search name" :"Buscar nombre", text: $searchText)
                        .padding(.vertical, 10)
                        .padding(.leading, 5)
                        .submitLabel(.done)
                    
                    if !searchText.isEmpty {
                        Button(action: {
                            searchText = ""
                        }) {
                            Image(systemName: "xmark.circle.fill")
                                .foregroundColor(.gray)
                        }
                        .padding(.trailing, 8)
                    }
                }
                .frame(width: 235, height: 40)
                .background(RoundedRectangle(cornerRadius: 20).fill(Color(.systemGray6)))
                .padding(.trailing, 10)
               
                
                // BotÃ³n para cambiar el idioma
                     Button(action: {
                         showLanguageAlert = true // Muestra el Alert
                     }) {
                         Text(isEnglish ? "ES" : "EN")
                             .font(.system(size: 14))
                             .padding(11)
                             .background(Color(.systemGray6))
                             .foregroundColor(.blue)
                              .cornerRadius(20)
                     }
                     .alert(isPresented: $showLanguageAlert) {
                         Alert(
                            title: Text(isEnglish ?   "Â¿Cambiar idioma?":"Change language?"),
                             message: Text(isEnglish ? "Â¿Quieres cambiar a EspaÃ±ol ðŸ‡ªðŸ‡¸?":"Do you want to switch to English ðŸ‡ºðŸ‡¸?"),
                             primaryButton: .default(Text(isEnglish ? "Si" : "Yes")) {
                                 isEnglish.toggle() // Cambia el idioma
                             },
                             secondaryButton: .destructive(Text(isEnglish ? "No" : "No")) // No hace nada
                         )
                     }
                
            }
            .padding(.horizontal, 16) // Espacio en los costados

            
            HStack {
                VStack(alignment: .leading) { // Asegura que los elementos dentro estÃ©n alineados a la izquierda
                    Text(isEnglish ? "Clock" : "Reloj")
                        .foregroundColor(.white)
                        .font(.title2)
                        .fontWeight(.bold)

                    Image(selectedImageName)
                        .resizable()
                        .aspectRatio(contentMode: .fit)
                        .frame(width: 60, height: 60)
                        .cornerRadius(8)
                        .padding(3)
                        .overlay(
                            RoundedRectangle(cornerRadius: 11)
                                .stroke(Color.gray, lineWidth: 2)
                        )
                }
                .padding(.leading, 14)
                
                
                Spacer() // Empuja el texto a la derecha

                VStack(alignment: .leading, spacing: 8) { // VStack para alineaciÃ³n vertical
                    
                    
                    // BotÃ³n de Instrucciones
                    Button(action: {
                        showInstruModal = true
                    }) {
                        Text(isEnglish ? "ðŸ’¡Guide?, tap here" :"ðŸ’¡Â¿Instrucciones? toca aqui")
                            .font(.subheadline)
                            .foregroundColor(.blue)
                    }
                    .sheet(isPresented: $showInstruModal) {
                        InstruView()
                    }
                    Text(isEnglish ? "âœ… New! Tap the widget name to see its description." :"âœ… Nuevo! Toca el nombre del widget para ver su descripciÃ³n.")
                        .foregroundColor(.white)
                        .font(.subheadline)
                        .padding(.horizontal,22)
                        .padding(.leading, -24)
                    
                }
                .padding(.leading, 20) // Padding general para centrar el contenido
                .padding(.top, 10) // Espacio superior opcional
            }
            .padding(.horizontal, 35) // Espaciado en los costados

            
            
            ScrollView {
                Divider()
                    .frame(height: 1) // Ajusta el grosor de la lÃ­nea
                    .background(Color.gris1) // Color de la lÃ­nea
                    .padding(.horizontal, 1)
                    .padding(.top,3)
             
            
                
                LazyVGrid(columns: [GridItem(.flexible()), GridItem(.flexible())], spacing: 16) {
                ForEach(filteredImages(), id: \.self) { imageName in
                    VStack(spacing: 8) {
                        Button(action: {
                            selectedImageName = imageName
                            showAlert = true
                            //      AnalyticsManager.shared.logButtonPress(buttonName: imageName)
                        }) {
                            VStack {
                                Image(imageName)
                                    .resizable()
                                    .aspectRatio(contentMode: .fit)
                                    .cornerRadius(20)
                                    .padding(7) // Espacio entre la imagen y el borde
                                    .overlay( // Capa para el borde gris
                                        RoundedRectangle(cornerRadius: 26)
                                            .stroke(Color.gris1, lineWidth: 3)
                                        // Borde gris de 3 puntos de ancho
                                    )
                                
                                
                                
                            }
                            .padding()
                            .padding(.bottom,-10)
                            .background(Color(.systemBackground))
                            .cornerRadius(10)
                            .shadow(radius: 5)
                            .overlay(
                                loadingButtons[imageName] == true ? ProgressView().progressViewStyle(CircularProgressViewStyle()).tint(.green) : nil
                            )
                        }
                        .alert(isPresented: $showAlert) {
                            Alert(
                                title: Text(isEnglish ? "Accept?" :"ConfirmaciÃ³n"),
                                message: Text(isEnglish ? "Do you want to convert to \(selectedImageName)? an ad will appear to keep the app free" :"Â¿Quieres transformar a \(selectedImageName)? aparecerÃ¡ un anuncio para mantener la app gratuita"),
                                primaryButton: .default(Text(isEnglish ? "Transform" :"Aceptar")) {
                                    interstitial?.didDismissAd = {
                                        selectImage(selectedImageName)
                                    }
                                    interstitial?.showAd(from: rootViewController())
                                },
                                secondaryButton: .destructive(Text(isEnglish ? "Cancel" :"Cancelar"))
                            )
                        }
                        // BotÃ³n para mostrar la descripciÃ³n
                        Button(action: {
                            selectedImageName = imageName
                            showDescriptionAlert = true
                        }) {
                            Text(imageName)
                                .font(.caption)
                                .foregroundColor(.white)
                                .padding(2)
                        }
                        .alert(isPresented: $showDescriptionAlert) {
                            Alert(
                                title: Text(isEnglish ? "Description" :"DescripciÃ³n"),
                                message: Text(imageDescriptions[selectedImageName] ?? isEnglish ? "No available" :"DescripciÃ³n no disponible."),
                                dismissButton: .default(Text(isEnglish ? "Close" :"Cerrar"))
                            )
                        }
                    }
                    }
                }
                .padding()
            }
            .padding()
            .padding(.top,-15)
            .cornerRadius(3.0)
            
            if showConfirmationMessage {
                HStack {
                    Image(systemName: "checkmark.circle.fill")
                        .foregroundColor(.green)
                    Text(isEnglish ? "Done!" :"Â¡Listo!")
                        .fontWeight(.bold)
                }
                .transition(.opacity)
                .padding()
                
            }
        }
        .onAppear {
            interstitial = Interstitial(adUnitID: interstitialAdUnitID)
        }
        .background(Color.black.ignoresSafeArea())
        .animation(.easeInOut, value: showConfirmationMessage)
        //.colorScheme(.dark) // Forzar modo oscuro
    }
}
        
        private func filteredImages() -> [String] {
            if searchText.isEmpty {
                return images
            } else {
                return images.filter { $0.contains(searchText.lowercased()) }
            }
        }
        
        private func selectImage(_ imageName: String) {
            loadingButtons[imageName] = true
            DispatchQueue.main.asyncAfter(deadline: .now() + 0.1) {
                userDefaults?.set(imageName, forKey: "selectedImage")
                WidgetCenter.shared.reloadAllTimelines()
                loadingButtons[imageName] = false
                showConfirmationMessage = true
                
                // Ocultar el mensaje de confirmaciÃ³n despuÃ©s de 2 segundos
                DispatchQueue.main.asyncAfter(deadline: .now() + 2) {
                    showConfirmationMessage = false
                }
            }
        }
    }
    
    private func rootViewController() -> UIViewController {
        guard let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,
              let window = windowScene.windows.first else {
            return UIViewController() // Devuelve un controlador vacÃ­o si no se encuentra ninguno
        }
        return window.rootViewController ?? UIViewController()
    }

    
    struct ClockView_Previews: PreviewProvider {
        static var previews: some View {
            ClockView()
        }
    }







import Foundation
import SwiftUI
import WidgetKit
import GoogleMobileAds

struct PinsView: View {
    @State private var searchText = ""
    @State private var showAlert = false
    @State private var selectedGroup: Int? = 1
    @State private var selectedImageName: String = ""
    @State private var groupImages: [Int: String] = [1: "", 2: "", 3: ""]
    @State private var loadingButtons: [String: Bool] = [:]
    @State private var showConfirmationMessage = false
    @State private var interstitial: Interstitial?
    @State private var showInstruModal = false
    
    @State private var showLanguageAlert = false
    @AppStorage("isEnglish", store: UserDefaults(suiteName: "group.artemis.EarthC137.isEnglish"))
    
    private var isEnglish: Bool = false
    
    
    // UserDefaults separados para cada grupo
    private let userDefaultsGroup1 = UserDefaults(suiteName: "group.artemis.EarthC137.Lock")
    private let userDefaultsGroup2 = UserDefaults(suiteName: "group.artemis.EarthC137.Lock2")
    private let userDefaultsGroup3 = UserDefaults(suiteName: "group.artemis.EarthC137.Lock3")
    
    private let images = ["dont touch","kanji turtle","hand bones","im doctor","im gammer","love cats","love dogs","atom","enso","robot","joystick","do better","handball","a football","football","rugby","tennis","love","one star", "no today", "game over","basketball","moon","psychology","soccer field","strengthtraining","volleyball 2","volleyball"]
    private let interstitialAdUnitID = "ca-app-pub-4622872693950947/9485573048"
    //private let interstitialAdUnitID = "ca-app-pub-3940256099942544/4411468910"
    
    var body: some View {
        NavigationView {
            VStack {
                // Encabezado con bÃºsqueda
                // Barra de bÃºsqueda y botÃ³n de idioma
                SearchBarView(searchText: $searchText, showLanguageAlert: $showLanguageAlert, isEnglish: $isEnglish)
                
                // Botones de grupo
                VStack {
                    HStack {
                        Text("Pins")
                            .foregroundColor(.white)
                            .font(.title2)
                            .fontWeight(.bold)
                        
                        Spacer()
                        
                        Button(action: {
                            showInstruModal = true
                        }) {
                            Text("ðŸ’¡Â¿Instrucciones? toca aqui")
                                .font(.subheadline)
                                .foregroundColor(.blue)
                        }
                        .sheet(isPresented: $showInstruModal) {
                            instrucView()
                        }
                    }
                    .padding(.horizontal, 40)
                    
                    HStack(spacing: 20) {
                        ForEach(1..<4) { group in
                            Button(action: {
                                selectedGroup = group
                            }) {
                                Image(groupImages[group] ?? "")
                                    .resizable()
                                    .aspectRatio(contentMode: .fit)
                                    .frame(width: 60, height: 60)
                                    .cornerRadius(5)
                                    .padding(3)
                                    .overlay(
                                        RoundedRectangle(cornerRadius: 15)
                                            .stroke(selectedGroup == group ? Color.blue : Color.gray, lineWidth: 2)
                                    )
                            }
                        }
                    }
                    .padding(.horizontal, 40)
                    .padding(.top,10)
                }
                
                // Grid de imÃ¡genes
                ScrollView {
                    Divider()
                        .frame(height: 1)
                        .background(Color.gris1)
                        .padding(.horizontal, 1)
                        .padding(.top, 3)
                    
                    Text("Pin \(selectedGroup ?? 1)")
                        .foregroundColor(.white)
                        .font(.headline)
                        .fontWeight(.bold)
                    
                    LazyVGrid(columns: [GridItem(.flexible()), GridItem(.flexible()), GridItem(.flexible())], spacing: 16) {
                        ForEach(filteredImages(), id: \.self) { imageName in
                            Button(action: {
                                if selectedGroup != nil {
                                    selectedImageName = imageName
                                    showAlert = true
                                }
                            }) {
                                VStack {
                                    Image(imageName)
                                        .resizable()
                                        .aspectRatio(contentMode: .fit)
                                        .cornerRadius(20)
                                        .padding(5)
                                        .overlay(
                                            RoundedRectangle(cornerRadius: 20)
                                                .stroke(Color.gris1, lineWidth: 2)
                                        )
                                    Text(imageName)
                                        .font(.caption)
                                        .foregroundColor(.white)
                                        .padding(.top, 2)
                                }
                                .padding(8)
                                .background(Color(.systemBackground))
                                .cornerRadius(10)
                                .shadow(radius: 5)
                                .overlay(
                                    loadingButtons[imageName] == true ? ProgressView().progressViewStyle(CircularProgressViewStyle()).tint(.green) : nil
                                )
                            }
                            .alert(isPresented: $showAlert) {
                                Alert(
                                    title: Text("ConfirmaciÃ³n"),
                                    message: Text("Â¿Quieres transformar a \(selectedImageName)? aparecerÃ¡ un anuncio para mantener la app gratuita"),
                                    primaryButton: .default(Text("Transformar")) {
                                        interstitial?.didDismissAd = {
                                            selectImage(selectedImageName, for: selectedGroup!)
                                        }
                                        interstitial?.showAd(from: rootViewController())
                                    },
                                    secondaryButton: .destructive(Text("Cancelar"))
                                )
                            }
                        }
                    }
                    .padding()
                }
                .padding()
                .padding(.top, -15)
                .cornerRadius(3.0)
                
                // Mensaje de confirmaciÃ³n
                if showConfirmationMessage {
                    HStack {
                        Image(systemName: "checkmark.circle.fill")
                            .foregroundColor(.green)
                        Text("Â¡Listo!")
                            .fontWeight(.bold)
                    }
                    .transition(.opacity)
                    .padding()
                }
            }
            .onAppear {
                interstitial = Interstitial(adUnitID: interstitialAdUnitID)
                // Cargar imÃ¡genes guardadas para cada grupo al iniciar
                groupImages[1] = userDefaultsGroup1?.string(forKey: "selectedImage") ?? ""
                groupImages[2] = userDefaultsGroup2?.string(forKey: "selectedImage") ?? ""
                groupImages[3] = userDefaultsGroup3?.string(forKey: "selectedImage") ?? ""
            }
            .background(Color.black.ignoresSafeArea())
            .animation(.easeInOut, value: showConfirmationMessage)
        }
    }
    
    // Filtrar imÃ¡genes basadas en la bÃºsqueda
    private func filteredImages() -> [String] {
        if searchText.isEmpty {
            return images
        } else {
            return images.filter { $0.localizedCaseInsensitiveContains(searchText) }
        }
    }
    
    // Seleccionar y guardar imagen para un grupo especÃ­fico
    private func selectImage(_ imageName: String, for group: Int) {
        loadingButtons[imageName] = true
        DispatchQueue.main.asyncAfter(deadline: .now() + 0.1) {
            groupImages[group] = imageName
            
            // Guardar la imagen en el UserDefaults correspondiente
            switch group {
            case 1:
                userDefaultsGroup1?.set(imageName, forKey: "selectedImage")
            case 2:
                userDefaultsGroup2?.set(imageName, forKey: "selectedImage")
            case 3:
                userDefaultsGroup3?.set(imageName, forKey: "selectedImage")
            default:
                break
            }
            
            WidgetCenter.shared.reloadAllTimelines()
            loadingButtons[imageName] = false
            showConfirmationMessage = true
            
            DispatchQueue.main.asyncAfter(deadline: .now() + 2) {
                showConfirmationMessage = false
            }
        }
    }
    
    // Obtener el controlador de vista raÃ­z
    private func rootViewController() -> UIViewController {
        guard let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,
              let window = windowScene.windows.first else {
            return UIViewController()
        }
        return window.rootViewController ?? UIViewController()
    }
}

struct PinsView_Previews: PreviewProvider {
    static var previews: some View {
        PinsView()
    }
}
